<!doctype html>
<html ng-app>
<head>
<title>REST Academy</title>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.3/angular.min.js"></script>

 <script language="javascript">
function ctrl($scope,$http) {
    // Запрос GET к RESTful web API
        $scope.getClients=function() {
       $http.get("/rest/clients").success(function(data) {
             // Помещаем ответ сервера в переменную companies
           $scope.clients=data.children;
       }).error(function(data, status) {
                 // Вывод информации об ошибке, если таковая возникнет
           alert("["+status+"] Ошибка при загрузке компаний! ["+data+"]");
       });
   };
   
    // Создать новую компанию
    $scope.create = function (client){
       $http.post("/rest/client",client)
       .success(function(data){$scope.getClients();$scope.alertzone="Добавили компанию "+client.Name;}).error(function(data,status){
        $scope.alertzone="["+status+"] Ошибка добавления компании :( ["+data+"]"; });
    }

    // Обновить существующую компанию
  $scope.update = function (client){
       $http.put("/rest/client/"+client.ID,client)
        .success(function(data){$scope.alertzone="Обновили компанию "+client.Name;}).error(function(data,status){ // поменял alert(....); на alertzone
        $scope.alertzone="["+status+"] Ошибка обновления имени компании :( ["+data+"]"; });
    }
            
    // Удалить компанию
    $scope.delete = function (client){
        $http.delete("/rest/client/"+client.ID)
        .success(function(data){$scope.getClients();$scope.alertzone="Удалили компанию "+client.Name;}).error(function(data,status){
            $scope.alertzone="["+status+"] Ошибка удаления компании :( ["+data+"]"; });
    }
};
</script>

</head>
<body ng-controller="ctrl" ng-init="getClients();">

<h4 ng-model="alertzone"><font color=red>{{alertzone}}</font></h4>

<form name="compCreateForm" ng-model="client" ng-submit="create(client); company='';">
    Добавить компанию <input type="text" ng-model="client.Name"/>
    <input type="submit" value="Добавить"/>
</form>
<br>
<div ng-repeat="client in clients">
    <form name="compForm" ng-submit="update(client); compForm.$setPristine();">
        <input type="text" ng-model="client.Name"/>
        <input type="submit" value="Сохранить" ng-show="compForm.$dirty"/>
        <input type="button" value="X" ng-click="delete(client);"/>
    </form>
</div>
</body>
</html>